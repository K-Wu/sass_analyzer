minimal copy from https://github.com/cloudcores/CuAssembler
version: 96a9f72baf00f40b9b299653fcef8d3e2b4a3d49